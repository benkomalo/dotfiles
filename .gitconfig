[core]
  # Global .gitignore file
  excludesfile = ~/.gitignore_global

[user]
  name = Ben Komalo
  email = benkomalo@gmail.com

[color]
  status = auto
  branch = auto
  diff = auto
  interactive = auto

[branch]
  # auto-adds the --track flag to git branch. Helps out arc (for Phabricator).
  autosetupmerge = always
  autosetuprebase = always

[alias]
  graph = log --graph --decorate --oneline --pretty=format:"%h%x20%Cgreen%d%x20%Cred%an%x20%Cblue%ad%x20%Creset%s" --all --full-history --date=short
  slog = log --oneline --pretty=format:"%h%x20%x20%Cred%an%x20%Cblue%ad%x20%Creset%s" --date=short
  comit = commit
  nothave = ls-files --exclude-standard --ignored --others
  st = status --short --branch
  br = branch
  df = diff
  qdiff = diff --no-ext-diff
  dd = difftool --dir-diff
  snippets = !sh -c 'git log --no-merges --oneline --author=benkomalo --since=1.week' #`date -v-mon '+%Y/%m/%d'`'
  nuke = !git reset --hard && git submodule update --recursive
  sup = submodule update --recursive
  ff = merge --ff-only

  # Ignore whitespace changes
  bw = blame -w

  # Auto update submodules
  co = "!f() { git checkout $* && git submodule update --init --recursive; }; f"

  # Open a phabricator URL if available
  phab = "!f() { url=$(git log -1 $1 | grep -o 'http.*D[0-9]*') ; if [ -z $url ] ; then echo No phab url ; return ; fi ; echo Opening $url; open $url; }; f"

[merge]
  # Always show a diffstat at the end of a merge
  stat = true

  tool = opendiff

[diff]
  # Use mnemonic prefixes (index, work tree, commit, object) instead of the standard a and b notation
  mnemonicprefix = true

  # Detect renames as well as copies
  renames = copies

  # Meld or opendiff
  external = gitmdiff

[init]
  templatedir = ~/.git_template

[push]
  default = simple
